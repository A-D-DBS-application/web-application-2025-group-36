<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <title>{{ title or "REVIEWR" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom colors -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            accent: "#f4b000",
            darkbg: "#021b2d"
          }
        }
      }
    }
  </script>

  <!-- Background animation (VANTA.NET) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

  <style>
    html, body {
      background-color: #021b2d;
      height: 100%;
      overflow-x: hidden;
    }
  </style>
</head>

<body class="text-white">

  <!-- NAVBAR -->
  <header class="w-full fixed top-0 z-50 bg-darkbg/80 backdrop-blur">
    <nav class="max-w-7xl mx-auto px-8 py-5 grid grid-cols-3 items-center text-lg">

      <!-- LOGO (links) -->
      <div class="text-2xl font-extrabold tracking-wide">
        REVIEW<span class="text-accent">R</span>
      </div>

      <!-- MIDDEN: NAV LINKS -->
      <div class="flex justify-center space-x-10">
        <a href="{{ url_for('main.index') }}" class="hover:text-accent transition">Home</a>
        <a href="{{ url_for('main.vision') }}" class="hover:text-accent transition">Vision</a>
      </div>

      <!-- RECHTS: LOGIN / ACCOUNT -->
      <div class="flex justify-end items-center space-x-4">

        {% if not session.get('user_id') %}
          <!-- Niet ingelogd -->
          <a href="{{ url_for('main.register') }}"
             class="border-2 border-accent px-3 py-1.5 rounded-lg text-accent hover:bg-accent hover:text-darkbg transition">
            Create Account
          </a>

          <a href="{{ url_for('main.login') }}"
             class="px-3 py-1.5 bg-accent text-darkbg rounded-lg font-semibold hover:bg-yellow-500 transition">
            Login
          </a>

        {% else %}
          <!-- Ingelogd -->
          <!-- PROFILE DROPDOWN -->
<div class="relative" x-data="{ open: false }">

  <!-- BUTTON -->
  <button @click="open = !open"
          class="flex items-center space-x-2 px-4 py-2 bg-accent text-darkbg rounded-lg font-semibold hover:bg-yellow-500 transition">
    <span>{{ session.get('user_name') }}</span>
    <span class="text-sm opacity-80">({{ session.get('user_role') }})</span>
  </button>

  <!-- DROPDOWN MENU -->
  <div x-show="open"
       @click.outside="open = false"
       class="absolute right-0 mt-3 w-48 bg-darkbg border border-accent/40 rounded-lg shadow-lg py-2 z-50">

    <a href="{{ url_for('main.change_role') }}"
       class="block px-4 py-2 text-white hover:bg-accent hover:text-darkbg transition">
       Change Role
    </a>

    <a href="{{ url_for('main.logout') }}"
       class="block px-4 py-2 text-white hover:bg-red-600 transition">
       Log Out
    </a>
  </div>

</div>

<!-- Alpine.js for dropdown -->
<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

        {% endif %}

      </div>
    </nav>
  </header>

  <!-- BACKGROUND ANIMATION -->
  <div id="vanta-bg" class="absolute top-0 left-0 w-full h-full -z-10"></div>

  <script>
    VANTA.NET({
      el: "#vanta-bg",
      color: 0xf4b000,
      backgroundColor: 0x021b2d,
      points: 12.00,
      maxDistance: 18.00,
      spacing: 15.00
    })
  </script>

  <!-- PAGE CONTENT -->
  <main class="pt-40 pb-20 px-8 max-w-6xl mx-auto">
    {% block content %}{% endblock %}
  </main>

</body>
</html>

