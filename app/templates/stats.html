{% extends "base.html" %}
{% block content %}

<div class="stats-header">
    <div class="tag tag-accent" style="margin-bottom: 1rem;">
        Live Data
    </div>
    <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">
        Platform <span class="text-gradient">Insights</span>
    </h1>
    <p style="font-size: 1.1rem; color: var(--text-muted);">
        Real-time metrics on submissions, reviews, and AI performance across the platform.
    </p>
</div>

<div class="stats-kpi-grid">

    <div class="stats-kpi-card">
        <div class="kpi-bg-icon">üìÑ</div>
        <div style="position: relative; z-index: 10;">
            <p class="stat-label-simple">Total Papers</p>
            <h2 class="kpi-main-value">{{ total_papers }}</h2>
            <div class="kpi-sub-badge green">
                <span>‚Üó Growing archive</span>
            </div>
        </div>
    </div>

    <div class="stats-kpi-card">
        <div class="kpi-bg-icon">‚úçÔ∏è</div>
        <div style="position: relative; z-index: 10;">
            <p class="stat-label-simple">Total Reviews</p>
            <h2 class="kpi-main-value">{{ total_reviews }}</h2>
            <div class="kpi-sub-badge teal">
                <span>‚òÖ Community active</span>
            </div>
        </div>
    </div>

    <div class="stats-kpi-card blue-gradient">
        <div class="kpi-bg-icon">ü§ñ</div>
        <div style="position: relative; z-index: 10;">
            <p class="stat-label-simple" style="color: #60a5fa;">AI Analyses</p>
            <h2 class="kpi-main-value" style="color: #2563eb;">{{ ai_done }}</h2>
            <div class="kpi-sub-badge blue">
                <span>‚úì Fully Processed</span>
            </div>
        </div>
    </div>

</div>

{% set weekdays = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"] %}

<div class="chart-grid">

    <div class="chart-card">
        <div class="chart-header">
            <div>
                <h3 style="font-size: 1.25rem; margin-bottom: 0.25rem;">Review Activity</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">Submissions per day of the week</p>
            </div>
            <div class="chart-icon-circle orange">üî•</div>
        </div>

        <div class="chart-area">
            {% for i in range(7) %}
            {% set count = weekday_map[i] if i in weekday_map else 0 %}
            
            <div class="chart-col">
                <div class="chart-tooltip">{{ count }}</div>
                
                <div class="chart-bar
                            {% if count == 0 %} bar-0
                            {% elif count < 5 %} bar-sm bar-orange
                            {% elif count < 10 %} bar-md bar-orange
                            {% else %} bar-lg bar-orange {% endif %}">
                </div>
                
                <span style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; font-weight: 500;">{{ weekdays[i] }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="chart-card">
        <div class="chart-header">
            <div>
                <h3 style="font-size: 1.25rem; margin-bottom: 0.25rem;">Paper Uploads</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">New knowledge per day of the week</p>
            </div>
            <div class="chart-icon-circle teal">üìÖ</div>
        </div>

        <div class="chart-area">
            {% for i in range(7) %}
            {% set count = paper_weekday_map[i] if i in paper_weekday_map else 0 %}
            
            <div class="chart-col">
                <div class="chart-tooltip">{{ count }}</div>
                
                <div class="chart-bar
                            {% if count == 0 %} bar-0
                            {% elif count < 5 %} bar-sm bar-teal
                            {% elif count < 10 %} bar-md bar-teal
                            {% else %} bar-lg bar-teal {% endif %}">
                </div>
                
                <span style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; font-weight: 500;">{{ weekdays[i] }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

</div>

<div style="margin-top: 3rem; text-align: center;">
    <p style="font-size: 0.75rem; color: var(--text-muted); display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
        <span class="pulse-dot" style="background-color: #22c55e;"></span>
        System Status: Operational ‚Ä¢ Last updated just now
    </p>
</div>

{% endblock %}