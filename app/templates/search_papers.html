{% extends "base.html" %}
{% block content %}

<h1 class="text-3xl font-extrabold mb-6">Available Papers</h1>

<!-- SEARCH BAR -->
<form method="get" class="mb-6">
  <input type="text" 
         name="q" 
         placeholder="Search papers..."
         value="{{ query }}"
         class="w-full px-4 py-2 rounded-lg bg-darkbg border border-accent/40 text-white focus:outline-none focus:border-accent">
</form>

{% if papers %}
  <div class="space-y-4">
    {% for p in papers %}
      <div class="p-4 bg-darkbg/70 rounded-xl border border-accent/30">
        <h2 class="text-xl font-bold text-accent">{{ p.title }}</h2>
        {% if p.author %}
          <p class="text-sm text-gray-300">By {{ p.author.name }}</p>
        {% endif %}
        {% if p.abstract %}
          <p class="mt-2 text-gray-200">{{ p.abstract }}</p>
        {% endif %}

        {% if p.file_path %}
          <a href="{{ url_for('static', filename=p.file_path) }}"
             target="_blank"
             class="inline-block mt-3 px-4 py-2 bg-accent text-darkbg rounded-lg font-semibold hover:bg-yellow-500 transition">
            View PDF
          </a>

          {% if session.get("user_id") == p.user_id or session.get("user_role") in ["System/Admin", "Founder"] %}
            <a href="{{ url_for('main.update_paper', paper_id=p.paper_id) }}" 
               class="inline-block mt-3 ml-2 px-4 py-2 bg-yellow-500 text-darkbg rounded-lg font-semibold hover:bg-accent transition">
               Edit
            </a>
          {% endif %}

        {% endif %}
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-gray-300">Er zijn nog geen papers opgeladen.</p>
{% endif %}

{% endblock %}
